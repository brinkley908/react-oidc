(this["webpackJsonp@spekta/react-oidc-example"]=this["webpackJsonp@spekta/react-oidc-example"]||[]).push([[0],{17:function(e,t,n){e.exports=n(31)},18:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);n(18);var o=n(0),i=n.n(o),a=n(14),r=n.n(a),c=n(9),s=n(1),l=n(7);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var g=function(e,t,n,o){var i=this,a=this;this.getUserManager=function(){return a.UserManager},this.signinRedirectCallback=function(){a.UserManager.signinRedirectCallback().then((function(){}))},this.getUser=function(){try{return Promise.resolve(i.UserManager.getUser()).then((function(e){var t=!1,n=function(){if(!e)return t=!0,Promise.resolve(i.UserManager.signinRedirectCallback())}();return n&&n.then?n.then((function(n){return t?n:e})):t?n:e}))}catch(e){return Promise.reject(e)}},this.signinRedirect=function(){(a.localStore?localStorage:sessionStorage).setItem("redirectUri",window.location.pathname),a.UserManager.signinRedirect({})},this.navigateToScreen=function(){var e=(a.localStore?localStorage:sessionStorage).getItem("redirectUri");window.location.replace(e)},this.getClientId=function(){return void 0===a.identityConfig||void 0===a.identityConfig.client_id?"Travelx-React-Client":a.identityConfig.client_id},this.getStorage=function(){var e=a.localStore?localStorage:sessionStorage;return JSON.parse(e.getItem("oidc.user:"+a.identityConfig.authority+":"+a.identityConfig.client_id))},this.isAuthenticated=function(){var e=a.localStore?localStorage:sessionStorage,t=JSON.parse(e.getItem("oidc.user:"+a.identityConfig.authority+":"+a.identityConfig.client_id));return!!t&&!!t.access_token},this.getAccessToken=function(){var e=a.localStore?localStorage:sessionStorage,t=JSON.parse(e.getItem("oidc.user:"+a.identityConfig.authority+":"+a.identityConfig.client_id));return t&&t.access_token?t.access_token:""},this.parseJwt=function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))},this.signinSilent=function(){a.UserManager.signinSilent().then((function(e){console.log("signed in",e)})).catch((function(e){console.log(e)}))},this.signinSilentCallback=function(){a.UserManager.signinSilentCallback()},this.createSigninRequest=function(){return a.UserManager.createSigninRequest()},this.logout=function(){var e=a.localStore?localStorage:sessionStorage;a.UserManager.signoutRedirect({id_token_hint:e.getItem("id_token")}),a.UserManager.clearStaleState()},this.signoutRedirectCallback=function(){var e=a.localStore?localStorage:sessionStorage;a.UserManager.signoutRedirectCallback().then((function(){e.clear(),window.location.replace(a.identityConfig.publicUrl)})),a.UserManager.clearStaleState()},e=function(e){return e||{authority:"https://localhost:44395",client_id:"Travelx-React-Client",redirect_uri:"http://localhost:3000/signin-oidc",login:"https://localhost:44395/account/login",automaticSilentRenew:"true",loadUserInfo:"true",silent_redirect_uri:"http://localhost:3000/silentrenew",post_logout_redirect_uri:"http://localhost:3000/logout",audience:"https://example.com",response_type:"code",response_mode:"fragment",grantType:"pasword",scope:"openid profile email roles travelxData offline_access",webAuthResponseType:"code",publicUrl:"http://localhost:3000"}}(e),t=function(e){return e||{issuer:"https://localhost:44395/",jwks_uri:"https://localhost:44395/.well-known/jwks",authorization_endpoint:"https://localhost:44395/connect/authorize",token_endpoint:"https://localhost:44395/connect/token",userinfo_endpoint:"https://localhost:44395/connect/userinfo",end_session_endpoint:"https://localhost:44395/connect/endsession",check_session_iframe:"https://localhost:44395/connect/checksession",revocation_endpoint:"https://localhost:44395/connect/revocation",introspection_endpoint:"https://localhost:44395/connect/introspect"}}(t),this.localStore=n,this.identityConfig=e;var r=this.localStore?localStorage:sessionStorage;this.UserManager=new l.UserManager(u({},e,{userStore:new l.WebStorageStateStore({store:r}),metadata:u({},t)})),o&&(l.Log.logger=o,l.Log.level=l.Log.DEBUG),this.UserManager.events.addUserLoaded((function(e){console.log("addUserLoaded event"),-1!==window.location.href.indexOf("signin-oidc")&&a.navigateToScreen()})),this.UserManager.events.addSilentRenewError((function(e){console.log("silent renew error",e.message)})),this.UserManager.events.addAccessTokenExpired((function(){console.log("token expired"),a.signinSilent()}))},p=i.a.createContext({signinRedirectCallback:function(){return{}},logout:function(){return{}},signoutRedirectCallback:function(){return{}},isAuthenticated:function(){return{}},signinRedirect:function(){return{}},signinSilentCallback:function(){return{}},createSigninRequest:function(){return{}},getAccessToken:function(){return{}},getUserManager:function(){return{}}}),h=p.Consumer,d=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this).authService=new g(t.identityConfig,t.metaData,void 0===t.localStore||t.localStore,t.logger),n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.prototype.render=function(){return i.a.createElement(p.Provider,{value:this.authService},this.props.children)},o}(o.Component),f=function(e){var t,n=e.component,o=e.loadingComponent,a=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["component","loadingComponent"]),r=o||i.a.createElement("span",null,"loading...");return i.a.createElement(s.a,u({},a,{render:(t=n,function(e){return i.a.createElement(h,null,(function(n){var o=n.isAuthenticated,a=n.signinRedirect,c=(0,n.getAccessToken)();return t&&o()?i.a.createElement(t,u({},e,{accessToken:c})):(a(),{loading:r})}))})}))};const m=()=>i.a.createElement(h,null,({signinRedirectCallback:e})=>(e(),i.a.createElement("span",null,"loading"))),S=()=>i.a.createElement(h,null,({logout:e})=>(e(),i.a.createElement("span",null,"loading"))),_=()=>i.a.createElement(h,null,({signoutRedirectCallback:e})=>(e(),i.a.createElement("span",null,"loading"))),v=()=>i.a.createElement("div",null,"register"),k=()=>i.a.createElement(h,null,({signinSilentCallback:e})=>(e(),i.a.createElement("span",null,"loading"))),C=()=>i.a.createElement("div",null,"Public page"),w=e=>{e.accessToken;return i.a.createElement("div",{id:"profile-partial-service"},i.a.createElement("div",null,"Private page"))};n(16);const y={authority:"https://localhost:44395",client_id:"Travelx-React-Client",redirect_uri:"http://localhost:3000/signin-oidc",login:"https://localhost:44395/account/login",automaticSilentRenew:"true",loadUserInfo:"true",silent_redirect_uri:"http://localhost:3000/silentrenew",post_logout_redirect_uri:"http://localhost:3000/logout",response_type:"code",response_mode:"fragment",scope:"openid profile email roles travelxData offline_access",webAuthResponseType:"code",publicUrl:"http://localhost:3000"},E={issuer:"https://localhost:44395/",jwks_uri:"https://localhost:44395/.well-known/jwks",authorization_endpoint:"https://localhost:44395/connect/authorize",token_endpoint:"https://localhost:44395/connect/token",userinfo_endpoint:"https://localhost:44395/connect/userinfo",end_session_endpoint:"https://localhost:44395/connect/endsession",check_session_iframe:"https://localhost:44395/connect/checksession",revocation_endpoint:"https://localhost:44395/connect/revocation",introspection_endpoint:"https://localhost:44395/connect/introspect"};n(30);class U extends o.Component{render(){return i.a.createElement(d,{logger:console,identityConfig:y,metaData:E},i.a.createElement(c.a,{basename:"/"},i.a.createElement(s.c,null,i.a.createElement(s.a,{exact:!0,path:"/signin-oidc",component:m}),i.a.createElement(s.a,{exact:!0,path:"/logout",component:S}),i.a.createElement(s.a,{exact:!0,path:"/logout/callback",component:_}),i.a.createElement(s.a,{exact:!0,path:"/register",component:v}),i.a.createElement(s.a,{exact:!0,path:"/silentrenew",component:k}),i.a.createElement(f,{path:"/dashboard",component:w}),i.a.createElement(s.a,{path:"/",component:C}))))}}r.a.render(i.a.createElement(U,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.f0a2256d.chunk.js.map